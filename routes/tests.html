<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Socket.IO Chat</title>
  <style>
    /* Add your styles here */
  </style>
</head>
<body>
  <div id="chatContainer">
    <!-- Display chat messages here -->
  </div>
  <input type="text" id="messageInput" placeholder="Type your message">
  <button onclick="sendMessage()">Send</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>

  <script>
    const socket = io('https://koppoh-41a7d984a436.herokuapp.com/'); // Replace with your server URL

    function sendMessage() {
      const userId = "wsqLwGE4IEZlSCXC9FQIndOr3vG3"; // Replace with the actual user ID
      const fundingRequestId = "-NkqA2yqm494SfZK4sKw"; // Replace with the actual funding request ID
      const newChat = document.getElementById('messageInput').value;
      const sourceChat = "user"; // Replace with the actual source (e.g., "user" or "admin")

      // Emit a new chat message to the server
      socket.emit('newChat', { userId, fundingRequestId, newChat, sourceChat });
    }

    // Listen for new chat messages from the server
    socket.on('newChat', ({ fundingRequestId, chatId, message, source, timestamp }) => {
      // Handle the new chat message, update your UI
      const chatContainer = document.getElementById('chatContainer');
      const newMessage = document.createElement('div');
      newMessage.innerHTML = `<strong>${source}:</strong> ${message}`;
      chatContainer.appendChild(newMessage);
    });

    // Join the room based on fundingRequestId
    socket.emit('joinRoom', "-NkqA2yqm494SfZK4sKw"); // Replace with the actual funding request ID
  </script>
</body>
</html>
